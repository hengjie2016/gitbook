vim是一个超强大的可定制的编辑器，有“编辑器之神”的称号。
在这里我对vim常用的命令做一个汇总，说是笔记也可以。

下面大部分命令都可以看成几个基础的小命令组合起来的。例如说d3gg
还有这里的命令都是大小写敏感的，例如说I 使用这个命令时是：shift+i

------

vim只有三个模式：命令模式，末行模式，插入模式。嗯 书上是这么说的，但是我总感觉所谓的末行模式只是命令模式里带:的命令。。。

## 关于文件

| 命令                               | 说明                                             |
| :--------------------------------- | :----------------------------------------------- |
| vim [-] filename1 filename2 。。。 | 可以打开多个文件进行编辑                         |
| Ctrl+n                             | 下一个文件（当打开多个文件时）                   |
| Ctrl+p                             | 上一个文件                                       |
| Ctrl+h/j/k/l                       | 来使光标在分屏之间移动                           |
| :sp filename                       | 水平分割打开文件filename                         |
| :vs filename                       | 垂直分割打开文件filename                         |
| :args                              | 可以查看打开的文件列表，正在编辑的文件会用[]标记 |
| :Ve                                | 左右分屏，在左面（:Ve!则在右面）浏览目录         |
| :q                                 | 退出vim或分屏                                    |
| :w                                 | 保存文件                                         |
| :wq或ZZ                            | 保存并退出                                       |
| :q!或者ZQ                          | 强制退出                                         |
| :w!                                | 若文件为只读文件，使用该命令可强制保存           |
| :w filename                        | 另存为名字为filename的文件                       |
| :wq!                               | 强制保存退出                                     |
| :r filename                        | 读取文件并插入到当前文件                         |
| :e!                                | 丢弃修改并打开原文件                             |
| :sp filename                       | 水平分屏打开文件或目录                           |
| :vs filename                       | 竖直分屏打开文件或目录                           |
| Ctrl+w n >                         | 使当前分屏增宽n列                                |
| Ctrl+z                             | 将vim转入后台暂时挂起，使用命令fg可以回到vim     |
| :!                                 | 执行外部名 如：:!ls                              |
| :r!                                | 将命令的返回结果插入文件当前位置如 :r!ls         |

要说一下的是

- 其中vim命令可以添加-o(水平分割)和-O(垂直分割)选项进行分屏操作。
  +filename可以是目录，用命令o可以在目录中打开文件。
- 虽然:Ve也可以打开目录，不过我感觉:vs .和 :sp .或者vim .打开目录更好，舒服。
- Ctrl+w c和Ctrl+w q还有:q的都可以关闭分屏，区别是后两者会在没有分屏的时候关闭vim

## 命令模式进入插入模式间的互换

| 命令               | 说明                                               |
| :----------------- | :------------------------------------------------- |
| o                  | 光标另起一行进入插入模式                           |
| i                  | 在光标处进入插入模式                               |
| a                  | 在光标右边进入插入模式                             |
| s                  | 在删除光标处的字符进入插入模式                     |
| I                  | 在光标所在行的行首开始插入                         |
| A                  | 在光标所在行的行末开始插入                         |
| cc或者S            | 删除光标所在行的内容并开始插入，相当于ddO（大写o） |
| ncc或者nS          | 从光标所在行开始删除n行并开始插入                  |
| Esc 键 或者 ctrl+[ | 从其他模式进入命令模式                             |

不要单单认为只是进入插入模式，例如说 ^和命令 A Ctrl+[移动到行末，I Ctrl+[移动到行首

## 光标的移动

| 命令              | 说明                                                         |
| :---------------- | :----------------------------------------------------------- |
| h                 | 使光标左移一个字符                                           |
| l                 | 使光标右移一个字符                                           |
| j                 | 使光标向下移动一行                                           |
| k                 | 使光标向上移动一行                                           |
| H                 | 使光标移动到屏幕的顶部                                       |
| M                 | 使光标移动到屏幕的中间                                       |
| L                 | 使光标移动到屏幕的尾部                                       |
| Ctrl+b            | 使光标上移一页，相当于pgup键                                 |
| Ctrl+f            | 使光标下移一页，相当于pgdn键                                 |
| Ctrl+u            | 使光标上移半页                                               |
| Ctrl+d            | 使光标下移半页                                               |
| gg                | 到文件首                                                     |
| G                 | 到文件尾                                                     |
| nG 或者 ngg以及:n | 使光标移动到第n行，如5G就是移动到第5行                       |
| %                 | 查找与当前括号匹配的括号                                     |
| 0 或 ^ 行首       | 这里的0是绝对的行首，而^是首字符，会忽略缩进直接跳到当前行第一个字符的位置 相当于home键 |
| $                 | 行末 相当于end键                                             |
| w                 | 下一个单词起始处                                             |
| e                 | 单词的末尾处                                                 |
| m{a-z}            | 局部标记光标所在位置                                         |
| `{a-z}            | 移动到标记的位置                                             |
| '{a-z}            | 移动到标记行的行首                                           |
| :delmarks u x-z   | 删除标记u、x、y、z                                           |
| :delmarks!        | 删除当前缓冲区的所有标记                                     |
| gd                | 跳到光标所在处局部变量的定义处                               |
| gD                | 跳到光标所在处全局变量的定义处                               |
| [[                | 跳到上一个函数块开始的地方                                   |
| ]]                | 跳到下一个函数块开始的地方                                   |
| [/                | 跳到当前注释块开始的地方                                     |
| ]/                | 跳到当前注释块结束的地方                                     |

这里要说一下的是：

- 由于保存命令:w、查找还有替换一大堆命令要在命令模式进行，所以命令模式应该是常态，只要编辑完文字，就应该Ctrl+[ :w一套带走。
- 刚开始使用 vim 的同学可能觉得hjkl并没有什么卵用，认为老衲有上下左右方向键啊，命令模式和插入模式都可以用方向键，hjkl就不行只能在命令模式用。
  不过上面说到命令模式应该是常态，当你vim用多了，你甚至会感觉懒的去摸方向键和鼠标(亲身经历)，现在我一直感觉方向键是个很不合理的东西。。。

## 排版

| 命令        | 说明                       |
| :---------- | :------------------------- |
| :ce         | 本行文字居中排列           |
| :le         | 本行文字靠左排列           |
| :ri         | 本行文字靠右排列           |
| Ctrl+ >或>> | 使选中行缩进向右移一个单位 |
| Ctrl+ <或<< | 使选中行缩进向左移一个单位 |

如果没有选中行就移动光标所在行，和v配合起来用 真香。

## 文本编辑

| 命令     | 说明                                                         |
| :------- | :----------------------------------------------------------- |
| r        | 替换光标所在位置的一个字符                                   |
| R        | 进入替换模式，可以替换多个字符                               |
| dd       | 对光标所在行进行剪切                                         |
| ndd      | 从光标所在行开始剪切掉n行 如4dd就是剪切包括光标所在行开始接下来的4行 |
| d^       | 或d0剪切从光标开始到行首的字符串                             |
| dw       | 从光标所在处开始删除一个单词                                 |
| d$       | 对从光标开始到行尾的字符串进行剪切                           |
| yy       | 复制光标所在行                                               |
| nyy      | 复制从光标所在行开始接下来的n行                              |
| y^ 或 y0 | 复制从光标开始到行首的字符串                                 |
| y$       | 对从光标开始到行尾的字符串进行复制                           |
| p(小写)  | 粘贴到光标右边                                               |
| P(大写)  | 粘贴到光标左边                                               |
| u        | 撤销                                                         |
| ctrl+r   | 恢复撤销的内容                                               |
| x        | 删除光标处的一个字符  相当于delete键                         |
| X        | 删除光标左边的一个字符 相当于退格键键                        |
| .        | 重复上一次操作                                               |
| ~        | 翻转光标所在处字符大小写，可以和可视模式配合食用             |

- 这里要注意r和s的区别，s是删除光标所在位置字符然后进入插入模式，r是使光标所在位置字符可替换，但是替换后还是命令模式。
- 我有好长一段时间以为dd是删除来着。。。不过当删除来用也可以。同样的，本质上x和X和dd一样都是剪切

## 查找

| 命令   | 说明                     |
| :----- | :----------------------- |
| /XXX   | 向下查找字符串XXX        |
| n      | 查找下一个XXX            |
| N      | 查找上一个XXX            |
| ?XXX   | 向上查找字符串XXX和/相反 |
| fx     | 向下查找字母x            |
| q/或q? | 打开查找记录             |
| #      | 当前字符上一次出现的位置 |

## 替换

| 命令                 | 说明                                                   |
| :------------------- | :----------------------------------------------------- |
| :s/old/new/g         | 查找old并替换为new，g代表整行匹配                      |
| :n,ms/old/new        | 把从第n行到第m行的old替换为 new,  n，m代表首尾行号     |
| :.,+ns/old/new       | 从光标所在行开始将接下来n行中的 old替换为new           |
| :%s/old/new/g        | 全文匹配替换 不加g的话，只会把每一行匹配的第一个替换掉 |
| :%s/old/new/gc       | 全文匹配替换，并且每次替换会弹出确认提示               |
| :.,+3s/ $ /"<<endl;/ | 从光标所在行开始在接下来的n行的末尾加上"<<endl;        |

## 宏

| 命令 | 说明        |
| :--- | :---------- |
| qx   | 开始录制宏x |
| q    | 结束录制    |
| @x   | 使用宏x     |

简单的说就是记录下键盘操作，重复使用，批量处理是一个

## 折叠

| 命令    | 说明                                            |
| :------ | :---------------------------------------------- |
| zfn     | 创建n+1行的折叠，可以在一个可视区域上使用该命令 |
| zo      | 打开折叠的文本                                  |
| zc      | 收起折叠                                        |
| za      | 打开/关闭当前折叠                               |
| zj      | 跳到下一个折叠处                                |
| zk      | 跳到上一个折叠处                                |
| zd      | 删除当前行的折叠                                |
| zD      | 删除当前行的折叠                                |
| zr      | 打开嵌套的折行                                  |
| zm      | 收起嵌套的折行                                  |
| zR (zO) | 打开所有折行                                    |
| zM (zC) | 收起所有折行                                    |

## 可视模式VISUAL

为了方便选取文本VIM中引入了可视模式，就和用鼠标选中文字段落一样。
v进入可视模式
可以配合d、y等进行剪切复制操作
可视模式下U（大写）和u（小写）可以改变选中行的字母的大小写，或许说设定更好一点。
Ctrl+v 进入块模式
在块模式下，可以进行多列的同时修改
如果有大量批量操作或者重复操作，使用宏、替换、块模式会是个相当漂亮的选择。
例如说
把

```
111010000000001110
211010000000010100
311100000000000011
411100000000000100
511100000000010000  
600001100000000111
700001100000001000
```

四位四位用","划分开
只需要执行命令：

```
1^ llll Ctrl+v 6j I , Ctrl+[ lllll.lllll.lllll.
```

就好了。

不是说一定要记住这些命令，只要多使用慢慢 慢慢的就成为习惯了。

还有就是我感觉，其中大部分命令是可以看做组合命令来记的。例如说d$可以看做 d删除选中字符串和$移动到行末来理解，只要理解了自然而然就记住了。